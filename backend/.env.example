# Server Configuration
PORT=3000
NODE_ENV=development
# Log level: fatal|error|warn|info|debug|trace. Use warn or error in production.
LOG_LEVEL=info

# Supabase Configuration
SUPABASE_URL=your_supabase_project_url
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# OpenAI Configuration (optional at startup; required when AI features are used)
OPENAI_API_KEY=your_openai_api_key
# Model for intent/response (audit and cost tracking); default: gpt-5.2 (flagship)
OPENAI_MODEL=gpt-5.2
# Max tokens for completion (cost control); default: 256
OPENAI_MAX_TOKENS=256


# Webhook URL (for local development, use ngrok)
WEBHOOK_URL=http://localhost:3000

# Redis / Webhook Queue (optional - leave unset to use placeholder queue)
REDIS_URL=redis://localhost:6379
WEBHOOK_WORKER_CONCURRENCY=5

# Encryption (required when using webhooks and dead letter queue - payloads are encrypted at rest)
# Base64-encoded 32-byte key (256 bits for AES-256). Generate e.g. with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
ENCRYPTION_KEY=

# Multi-doctor: each doctor connects Instagram via dashboard (Settings); webhook uses page_id → doctor_id resolution. Not used in production.
# DEFAULT_DOCTOR_ID=  (deprecated; do not use)
# Default doctor country for payment routing: IN=India (Razorpay), US/UK/EU=PayPal
# Used when doctor has no row in doctor_settings (e-task-4.1)
DEFAULT_DOCTOR_COUNTRY=IN
# Appointment fee fallback when doctor has no settings (e-task-4.1): amount in smallest unit (50000 = ₹500 paise)
APPOINTMENT_FEE_MINOR=50000
APPOINTMENT_FEE_CURRENCY=INR

# Notifications (e-task-5): email via Resend; doctor email fallback when not in auth
RESEND_API_KEY=
DEFAULT_DOCTOR_EMAIL=

# Payment Gateways (e-task-4)
RAZORPAY_KEY_ID=
RAZORPAY_KEY_SECRET=
RAZORPAY_WEBHOOK_SECRET=
PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=
PAYPAL_WEBHOOK_ID=
PAYPAL_MODE=sandbox

# Instagram Configuration
INSTAGRAM_APP_ID=your_instagram_app_id
INSTAGRAM_APP_SECRET=your_instagram_app_secret
INSTAGRAM_ACCESS_TOKEN=your_instagram_access_token
INSTAGRAM_WEBHOOK_VERIFY_TOKEN=your_webhook_verify_token_min_32_chars
# INSTAGRAM_PAGE_ID= (deprecated; multi-doctor uses doctor_instagram table; each doctor connects via dashboard)
# OAuth connect flow: full callback URL (e.g. https://your-api.com/api/v1/settings/instagram/callback)
INSTAGRAM_REDIRECT_URI=https://your-api.com/api/v1/settings/instagram/callback
# After successful connect, redirect browser here (optional; if unset, callback returns JSON)
INSTAGRAM_FRONTEND_REDIRECT_URI=https://your-app.com/dashboard/settings/instagram